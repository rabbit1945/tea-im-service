(function(){"use strict";var t={8778:function(t,e,s){var o={};s.r(o),s.d(o,{reqAuth:function(){return Me},reqAuthLogin:function(){return Ne},reqCreateThumb:function(){return Ye},reqGetMsg:function(){return Oe},reqLogout:function(){return Be},reqRoomInfo:function(){return Te},reqRoomList:function(){return Pe},reqRoomUserList:function(){return Fe},reqUploadAudio:function(){return ze},reqUploadBase64:function(){return De},reqUploadChunk:function(){return Ge},reqUploadFiles:function(){return qe},reqUploadMerge:function(){return Je},reqUploadPut:function(){return je},reqUserLogin:function(){return Re},reqUserRegister:function(){return Ee},reqcheckChunkExis:function(){return Ue}});var i=s(2856),a=s(4927),r=s.n(a),n=s(6718),l=s.n(n),u=s(2882),c=s.n(u),d=s(6450),m=s(4340),h=s.n(m),g=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"about"}},[e("router-view")],1)},p=[],f={name:"App",metaInfo(){return{title:this.$store.state.message.title,meta:[{name:"keyWords",content:"lightning"}],link:[{rel:"asstes",href:"https://assets-cdn.github.com/"}]}},data(){return{title:"闪电"}},mounted(){},destroyed(){},methods:{}},v=f,w=s(1656),y=(0,w.A)(v,g,p,!1,null,null,null),k=y.exports,b=(s(4114),s(1594)),_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"logon login-form"},[e("h1",[t._v("注册")]),e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px","label-position":"left"}},[e("el-form-item",{attrs:{prop:"nick_name",rules:[{required:!0,message:"昵称不能为空"},{type:"string",required:!0,min:3,message:"昵称大于3个字符"}]}},[e("el-input",{attrs:{type:"nick_name",autocomplete:"off",placeholder:"昵称"},model:{value:t.ruleForm.nick_name,callback:function(e){t.$set(t.ruleForm,"nick_name",e)},expression:"ruleForm.nick_name"}})],1),e("el-form-item",{attrs:{prop:"login",rules:[{required:!0,message:"账号不能为空"},{type:"string",required:!0,min:3,message:"账号大于3个字符"}]}},[e("el-input",{attrs:{type:"login",autocomplete:"off",placeholder:"账号"},model:{value:t.ruleForm.login,callback:function(e){t.$set(t.ruleForm,"login",e)},expression:"ruleForm.login"}})],1),e("el-form-item",{attrs:{prop:"password",rules:[{required:!0,message:"密码不能为空"},{type:"string",required:!0,min:6,message:"密码大于6个字符"}]}},[e("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),e("el-form-item",{attrs:{prop:"confirm_password",rules:[{required:!0,message:"密码不能为空"},{type:"string",required:!0,min:6,message:"密码大于6个字符"}]}},[e("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"确认密码"},model:{value:t.ruleForm.confirm_password,callback:function(e){t.$set(t.ruleForm,"confirm_password",e)},expression:"ruleForm.confirm_password"}})],1),e("el-form-item",[e("el-button",{staticClass:"but",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1)],1)],1)},C=[],S={name:"Register",data(){return{ruleForm:{nick_name:"",login:"",password:"",confirm_password:""},rules:{}}},mounted(){},methods:{async submitForm(t){this.$refs[t].validate((async t=>{if(!t)return this.$alert("注册失败");try{const{login:t,password:e,nick_name:s,confirm_password:o}=this.ruleForm;s&&o&&t&&e&&await this.$store.dispatch("userRegister",{login:t,password:e,nick_name:s,confirm_password:o}).then((t=>1e4!==t.code?this.$alert(t.msg):this.$router.push("/login"))).catch((t=>this.$alert(t)))}catch(e){return this.$alert(e.message)}}))}}},A=S,L=(0,w.A)(A,_,C,!1,null,"0fa2c81c",null),x=L.exports,I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"logon login-form"},[e("h1",[t._v("登录")]),e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px","label-position":"left"}},[e("el-form-item",{attrs:{prop:"login",rules:[{required:!0,message:"账号不能为空"},{type:"string",required:!0,min:3,message:"账号大于3个字符"}]}},[e("el-input",{attrs:{type:"login",autocomplete:"off",placeholder:"账号"},model:{value:t.ruleForm.login,callback:function(e){t.$set(t.ruleForm,"login",e)},expression:"ruleForm.login"}})],1),e("el-form-item",{attrs:{prop:"password",rules:[{required:!0,message:"密码不能为空"},{type:"string",required:!0,min:6,message:"密码大于6个字符"}]}},[e("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),e("el-form-item",[e("el-button",{staticClass:"but",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1),e("div",[e("span",{staticClass:"icon-login"},[t._v(" 第三方账号登录 "),e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.getAuthLogin("gitee")}}},[e("use",{attrs:{"xlink:href":"#icon-gitee"}})]),e("span",{on:{click:function(e){return t.register()}}},[t._v(" 立即注册")])])])],1)],1)},R=[],E=s(5462);const M=(t,e)=>{E.A.set(t,e)},N=t=>E.A.get(t),T=t=>{E.A.remove(t)};var F={data(){return{ruleForm:{login:"",password:""},rules:{},oauthToken:N("oauthToken"),isAuthLogin:N("isAuthLogin")}},mounted(){const t=this.oauthToken,e=this.isAuthLogin;if(console.log("oauthToken",t,e),t&&e)try{this.$store.dispatch("authLogin",{oauthToken:t}).then((t=>{if(1e4!==t.code)return this.$alert(t.msg);this.$router.push("/")})).catch((t=>{this.$alert("登录失败")}))}catch(s){this.$alert(s.message)}},methods:{async getAuthLogin(t){const e=this.oauthToken??"";await this.$store.dispatch("getAuthLogin",`?origin=${t}&oauthToken=${e}`).then((t=>{t.url&&t.url.length>0&&(window.location.href=t.url),t.oauthToken&&t.origin&&(window.location.href="https://"+window.location.host)}))},async register(){console.log("-------------------"),this.$router.push("/register")},async submitForm(t){this.$refs[t].validate((async t=>{if(t)try{const{login:t,password:e}=this.ruleForm;t&&e&&await this.$store.dispatch("userLogin",{login:t,password:e}).then((t=>{if(1e4!==t.code)return this.$alert(t.msg);this.$router.push("/")})).catch((t=>{this.$alert("登录失败")}))}catch(e){this.$alert(e.message)}else this.$alert("登录失败")}))}}},P=F,B=(0,w.A)(P,I,R,!1,null,"e15633b2",null),O=B.exports,z=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[e("div",{staticClass:"wrap"},[e("MsgTop",{attrs:{room:t.roomInfo}}),e("MsgBase",{attrs:{userStatus:t.userStatus}}),e("Messages",{key:t.timer}),e("UserList",{key:t.timer+"-userList",attrs:{showUser:!0}}),e("Room",{on:{roomUserList:t.roomUserList}}),e("router-view")],1)])},q=[],D=function(){var t=this,e=t._self._c;return e("el-header",{staticClass:"top",staticStyle:{height:"60px",width:"1221px"}},[e("span",{staticClass:"chatRoomName"},[t._v(t._s(t.room.roomName))]),e("span",{staticClass:"peopleNumber"},[t._v(" 在线 "+t._s(t.room.countOnline)+" 人 ")])])},j=[],U={name:"MsgTop",data(){return{}},props:["room"]},G=U,J=(0,w.A)(G,D,j,!1,null,"6dd57cc8",null),Y=J.exports,W=function(){var t=this,e=t._self._c;return e("el-aside",{staticClass:"base right_box",attrs:{width:"260px"}},[e("div",[e("img",{staticClass:"userLogo",attrs:{src:t.userLogo,alt:""}}),"online"==t.userStatus?e("span",{staticClass:"userStatus",staticStyle:{"background-color":"blue"}}):t._e(),e("span",{staticClass:"name"},[t._v(t._s(t.nickName))]),e("div",{staticClass:"bottom"},[e("div",{on:{click:function(e){return t.onClick("service")}}},[e("el-avatar",{attrs:{size:40,src:"/assets/images/gitee.png"}})],1),e("span",{staticStyle:{"writing-mode":"horizontal-tb","padding-right":"61px",color:"azure"}},[t._v("后端")]),e("div",{on:{click:function(e){return t.onClick("client")}}},[e("el-avatar",{attrs:{size:40,src:"/assets/images/gitee.png"}})],1),e("span",{staticStyle:{"writing-mode":"horizontal-tb","padding-right":"61px",color:"azure"}},[t._v("前端")]),e("div",{on:{click:function(e){return t.onClick("yuque")}}},[e("el-avatar",{attrs:{size:40,src:"/assets/images/yuque.png"}})],1),e("span",{staticStyle:{"writing-mode":"horizontal-tb","padding-right":"61px",color:"azure"}},[t._v("文档")]),e("div",{on:{click:t.logout}},[e("el-avatar",{attrs:{size:40,src:"/assets/images/logout.png"}})],1)])])])},H=[],Q={name:"MsgBase",data(){return{nickName:this.$store.state.user.userInfo.nick_name,userLogo:this.$store.state.user.userInfo.photo,user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id}},props:["userStatus"],components:{},methods:{logout(){this.$confirm("请问是否退出账号？").then((t=>{this.$store.dispatch("userLogout").then((t=>{!0===t&&(this.$socket.close(),this.$message({type:"success",message:"账号登出成功！！！"}),this.$router.push({name:"Login"}))}))})).catch((t=>{}))},onClick(t){"client"==t&&(window.location.href="https://gitee.com/gzy1991/tea-im-client"),"service"==t&&(window.location.href="https://gitee.com/gzy1991/tea-im-service"),"yuque"==t&&(window.location.href="https://www.yuque.com/yiyan-2j8fb/iugs0e")}}},$=Q,X=(0,w.A)($,W,H,!1,null,"3c60af38",null),V=X.exports,K=function(){var t=this,e=t._self._c;return e("div",[e("el-main",t._b({staticClass:"message el-main"},"el-main",t.message,!1),[e("virtual-list",{ref:"returnBottom",staticClass:"msg-list",attrs:{"data-key":"seq","data-sources":t.historyMessageList,"data-component":t.itemComponent,keeps:this.keeps,"estimate-size":this.estimateSize,start:100},on:{totop:t.totop,tobottom:t.bottom,scroll:t.onScroll,composeFile:t.composeFile}})],1),e("el-footer",{staticStyle:{"margin-top":"2px"}},[t.msgNum>0&&!1===t.isBottom?e("el-badge",{staticClass:"item msg-badge-down",attrs:{value:t.msgNum}},[e("el-button",{attrs:{size:"small",icon:"el-icon-arrow-down"},on:{click:t.getLocation}},[t._v("最新消息")])],1):t._e(),t.msgNum>0&&!0===t.isBottom?e("el-badge",{staticClass:"item msg-badge-up",attrs:{value:t.msgNum}},[e("el-button",{attrs:{size:"small",icon:"el-icon-arrow-up"},on:{click:t.getLocation}},[t._v("最新消息")])],1):t._e(),e("MsgSend",{attrs:{proTitle:t.title},on:{findNewMsg:t.findNewMsg}}),e("div",{staticClass:"alertBox",staticStyle:{display:"none"},attrs:{id:"myAlertBox"}})],1)],1)},Z=[],tt=(s(8992),s(2577),s(8054)),et=s.n(tt),st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"world"},[e("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.showDialog,expression:"showDialog"}],staticClass:"msg-emoji",on:{select:t.selectMsg}}),e("div",{staticClass:"msg-button"},[e("el-button",{ref:"emojis",staticClass:"msg-el-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.toogleDialogEmoji}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/emoji.png"}})]),e("div",{on:{click:t.audioPermission}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/mic.png"}})]),e("div",{staticClass:"audio"},[e("Audio",{ref:"permission",on:{audioData:t.audioData,statusClass:t.statusClass}})],1),e("button",{staticStyle:{"margin-left":"60px"},on:{click:function(e){return t.btnClick()}}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/jietu.png"}})]),e("button",{staticStyle:{"margin-left":"25px","margin-top":"6px"},on:{click:function(e){return t.upload()}}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/file.png"}})])],1),e("uploadPut",{ref:"uploadFile",on:{fileSuccess:t.fileSuccess}}),0==t.userRole?e("at",t._b({style:t.stateStatus,attrs:{members:t.members,"filter-match":t.filterMatch,"delete-match":t.deleteMatch,"name-key":"nick_name"},on:{insert:t.getValue},scopedSlots:t._u([{key:"item",fn:function(s){return[e("span",{domProps:{textContent:t._s(s.item.nick_name)}})]}}],null,!1,1655236290)},"at",t.userList,!1),[e("div",{ref:"input",staticClass:"msg-content",attrs:{id:"sendMsg",placeholder:"enter 发送消息  shift+@ 可以@他人，复制不可以哦！",contenteditable:""},on:{keydown:t.send}},[t._v(" "+t._s(t.emo)+" ")])]):t._e(),e("div",{staticClass:"login"},[1==t.userRole?e("el-button",{attrs:{type:"primary",round:""},on:{click:t.login}},[t._v("请先登录...")]):t._e()],1)],1)},ot=[],it=(s(4520),function(){var t=this,e=t._self._c;return e("div",{staticClass:"myDiv",staticStyle:{display:"none"}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"#","on-change":t.uploadFile,"show-file-list":!0,"auto-upload":!1}},[t._v(" "+t._s(t.fileList)+" "),e("el-button",{ref:"uploadfileBut",attrs:{size:"small",type:"primary"}},[t._v("上传文件")])],1)],1)}),at=[],rt=s(4774),nt=s.n(rt);const lt=(t,e)=>{localStorage.setItem(t,e)},ut=t=>{localStorage.removeItem(t)},ct=3145728,dt=104857600;var mt={name:"uploadPut",components:{},props:{},data(){return{fileList:[],loadingFile:!1,user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,msgInfo:[],type:!1,file:[]}},watch:{},computed:{},methods:{async uploadFile(t){const e=t.raw;this.currentFile=e;const s=t.size;if(s>dt)this.$alert("上传文件小于"+dt/1024/1024+"M");else if(console.log("File::",t),this.fileList=[{name:t.name}],s<=ct){console.log("普通：：",s,ct);const i=await this.getFileMd5(e,1);var o=new FileReader;o.readAsDataURL(e),o.onload=e=>{this.$store.dispatch("uploadPut",{file:e.target.result,fileName:t.name,fileSize:1024*s}).then((e=>{e?this.sendMsg(i,t.name,e.newFileName,1,s,e.path,e.thumbPath,3):this.$alert("上传失败")}))}}else{const o=Math.ceil(s/ct);console.log("文件大小：",s/1024/1024+"Mb","分片数：",o);const i=await this.getFileMd5(e,o);lt(i,JSON.stringify(e)),console.log("向后端请求本次分片上传初始化");const a={identifier:i,filename:t.name,totalChunks:o,totalChunks:s,file:t};this.checkChunkExis(a,i,t,o,s)}},sendMsg(t,e,s,o,i,a,r,n){this.$emit("fileSuccess",{room_id:this.room_id,identifier:t,filename:e,newFileName:s,totalChunks:o,totalSize:i,mergePath:a,uploadStatus:n,thumbPath:r})},async checkChunkExis(t,e,s,o,i){await this.$store.dispatch("checkChunkExis",t).then((t=>{if(1e4!==t.code)return void this.$alert(t.msg);let a=0;1===t.data.type&&(a=3),this.sendMsg(e,s.name,t.data.newFileName,o,i,t.data.mergePath,t.data.thumbPath,a),this.type=t.data.type,this.file=s}))},getFileMd5(t,e){return new Promise(((s,o)=>{let i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=e,r=0,n=new(nt().ArrayBuffer),l=new FileReader;function u(){let e=r*ct,s=e+ct;s>t.size&&(s=t.size),l.readAsArrayBuffer(i.call(t,e,s))}l.onload=function(t){if(n.append(t.target.result),r++,r<a)u();else{let t=n.end();s(t)}},l.onerror=function(t){o(t)},u()}))},async getMsg(t){if(0!=t.content_type){this.msgInfo=t;let e=t.total_chunks,s=t.file_size,o=t.md5,i=t.file_name,a=t.seq;0===this.type&&await this.chunk(e,s,o,i,a)}},chunk(t,e,s,o,i){let a=this.file,r=0;for(var n=r;n<t;n++){let r=n*ct,u=Math.min(e,r+ct),c=n,d=a.raw.slice(r,u);var l=new FileReader;l.readAsDataURL(d);let m=(c+1)/t*100;l.onload=r=>{let n={seq:i,user_id:this.user_id,room_id:this.room_id,identifier:s,filename:a.name,totalChunks:t,chunkNumber:c,totalSize:e,newFileName:o,file:r.target.result,chunkSize:ct,uploadProgress:m.toFixed(2)+"%"};console.log("开始上传第"+c+"个分片"),this.$socket.emit("chunkFile",n)}}}},sockets:{},created(){},mounted(){}},ht=mt,gt=(0,w.A)(ht,it,at,!1,null,"78b80bb9",null),pt=gt.exports,ft=s(8955),vt=s(5756),wt=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPermission,expression:"isShowPermission"}],ref:"keypressSpace",staticClass:"msg-audio",attrs:{tabindex:"1"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.startRecorder()}}},[e("span",[e("img",{staticClass:"msg-img",attrs:{src:s(748)}}),t._v("按空格开始/结束。 "),e("el-button",{attrs:{round:"",size:"mini",type:"success"},on:{click:function(e){return t.outPlay()}}},[t._v("退出")])],1),e("span",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.startEnd&&0===t.countdownimes,expression:"startEnd && countdownimes === 0"}],staticClass:"times"},[t._v(t._s(t.satrtTime))]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.startEnd&&t.countdownimes>0,expression:"startEnd && countdownimes > 0"}],staticClass:"times"},[t._v(t._s(t.countdownimes)+" 10秒之后自动发送")]),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.startEnd,expression:"startEnd"}],staticClass:"canvas",attrs:{id:"canvas"}})])])])},yt=[],kt=(s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),s(5095)),bt=s.n(kt);const _t=s(362),Ct=new(bt())({sampleBits:16,sampleRate:11025,numChannels:1,compiling:!0});var St={name:"Audio",data(){return{drawRecordId:null,oCanvas:null,ctx:null,drawPlayId:null,pCanvas:null,pCtx:null,startEnd:!1,isShowPermission:!1,satrtTime:0,endTime:60,countdownimes:0}},mounted(){this.startCanvas()},methods:{startCanvas(){this.oCanvas=document.getElementById("canvas"),this.ctx=this.oCanvas.getContext("2d")},outPlay(){this.stopRecorder(),this.startEnd=!1,this.isShowPermission=!1,this.$emit("statusClass",{status:!1})},startRecorder(){!1===this.startEnd?Ct.start().then((()=>{this.startEnd=!0,this.drawRecord()}),(t=>{this.stopRecorder(),this.getRecorder(),this.startEnd=!0,console.log("error:",t)})):(this.stopRecorder(),this.getRecorder(),this.startEnd=!1)},resumeRecorder(){Ct.resume()},pauseRecorder(){Ct.pause(),this.drawRecordId&&cancelAnimationFrame(this.drawRecordId),this.drawRecordId=null},stopRecorder(){Ct.stop(),this.drawRecordId&&cancelAnimationFrame(this.drawRecordId),this.drawRecordId=null},playRecorder(){Ct.play(),this.drawPlay()},pausePlayRecorder(){Ct.pausePlay()},resumePlayRecorder(){Ct.resumePlay(),this.drawPlay()},stopPlayRecorder(){Ct.stopPlay()},destroyRecorder(){Ct.destroy().then((function(){Ct=null,this.drawRecordId&&cancelAnimationFrame(this.drawRecordId),this.drawRecordId=null}))},getRecorder(){let t=parseInt(Ct.duration),e=Ct.fileSize;const s=this.convertToMp3(Ct.getWAV());this.uploadWAVData(s,t,e)},downPCM(){Ct.downloadPCM("新文件")},downWAV(){Ct.downloadWAV("新文件")},uploadWAVData(t,e,s){var o=new FormData;let i=(new Date).getTime()+".mp3";const a=new File([t],i);o.append("file",a),this.$emit("audioData",{formData:o,toltime:e,fileSize:s,fileName:i})},getPermission(){this.isShowPermission?(this.isShowPermission=!1,this.$emit("statusClass",{status:!1})):bt().getPermission().then((()=>{console.log("获取权限成功"),this.isShowPermission=!0,this.$emit("statusClass",{status:!0})}),(t=>{console.log(`${t.name} : ${t.message}`),this.$alert("请开启麦克风权限")}))},getMp3Data(){const t=this.convertToMp3(Ct.getWAV());Ct.download(t,"recorder","mp3")},convertToMp3(t){const e=_t.WavHeader.readHeader(t),{channels:s,sampleRate:o}=e,i=new _t.Mp3Encoder(s,o,128),a=Ct.getChannelData(),r=[],n=a.left&&new Int16Array(a.left.buffer,0,a.left.byteLength/2),l=a.right&&new Int16Array(a.right.buffer,0,a.right.byteLength/2),u=n.length+(l?l.length:0),c=1152;for(let m=0;m<u;m+=c){const t=n.subarray(m,m+c);let e=null,o=null;2===s?(e=l.subarray(m,m+c),o=i.encodeBuffer(t,e)):o=i.encodeBuffer(t),o.length>0&&r.push(o)}const d=i.flush();return d.length>0&&r.push(d),new Blob(r,{type:"audio/mp3"})},drawRecord(){this.satrtTime=parseInt(Ct.duration);let t=this.endTime-this.satrtTime;if(t<=10&&t>0&&(this.countdownimes=this.endTime-this.satrtTime,0==this.countdownimes&&this.startEnd))return this.stopRecorder(),this.getRecorder(),this.startEnd=!1,this.satrtTime=0,this.countdownimes=0,!0;this.drawRecordId=requestAnimationFrame(this.drawRecord);let e=Ct.getRecordAnalyseData(),s=e.length;this.ctx.fillStyle="rgb(200, 200, 200)",this.ctx.fillRect(0,0,this.oCanvas.width,this.oCanvas.height),this.ctx.lineWidth=2,this.ctx.strokeStyle="rgb(0, 0, 0)",this.ctx.beginPath();for(var o=1*this.oCanvas.width/s,i=0,a=0;a<s;a++){var r=e[a]/128,n=r*this.oCanvas.height/2;0===a?this.ctx.moveTo(i,n):this.ctx.lineTo(i,n),i+=o}this.ctx.lineTo(this.oCanvas.width,this.oCanvas.height/2),this.ctx.stroke()},drawPlay(){this.drawPlayId=requestAnimationFrame(this.drawPlay);let t=Ct.getPlayAnalyseData(),e=t.length;this.pCtx.fillStyle="rgb(200, 200, 200)",this.pCtx.fillRect(0,0,this.pCanvas.width,this.pCanvas.height),this.pCtx.lineWidth=2,this.pCtx.strokeStyle="rgb(0, 0, 0)",this.pCtx.beginPath();for(var s=1*this.pCanvas.width/e,o=0,i=0;i<e;i++){var a=t[i]/128,r=a*this.pCanvas.height/2;0===i?this.pCtx.moveTo(o,r):this.pCtx.lineTo(o,r),o+=s}this.pCtx.lineTo(this.pCanvas.width,this.pCanvas.height/2),this.pCtx.stroke()}}},At=St,Lt=(0,w.A)(At,wt,yt,!1,null,"9b43a6a8",null),xt=Lt.exports,It=s(9483),Rt=s.n(It),Et={name:"MsgSend",components:{VEmojiPicker:vt.D6,Audio:xt,At:Rt(),uploadPut:pt},data(){return{title:"闪电",text:"",showDialog:!1,drawer:!1,direction:"btt",user_id:this.$store.state.user.userInfo.user_id,userRole:this.$store.state.user.userInfo.user_role,nick_name:this.$store.state.user.userInfo.nick_name,userLogo:this.$store.state.user.userInfo.photo,room_id:this.$store.state.user.roomInfo.room_id,audio:{},atStatus:!1,sumNoticeOtherUser:0,countStr:0,members:[],contactList:[],fileList:[],headers:{Authorization:"Bearer "+this.$store.state.user.token},imagesExt:["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"],audioExt:["mp3","wav","wma","flac","midi","ra","aac","cda","mov","wavpack","ape"],videoExt:["avi","wmv","mpg","mov","rm","ram","swf","flv","mp4"],fileName:"",fileSize:0,stateStatus:"display:block;",emo:""}},metaInfo(){return{title:this.$store.state.message.title}},sockets:{async roomCallback(t){console.log("roomCallback::",t);var e=t.data;if(1e4!=t.code||e.length<=0)return this.$alert(" 请求失败，请重新请求");var s=e.user_id,o=e.room_id,i=e.contactList;await this.$store.dispatch("getMessage",e).then((t=>{this.$refs.uploadFile.getMsg(e),this.$emit("findNewMsg",{sendUserId:s,userId:this.user_id,room_id:o}),this.contactList=[],this.audio.fileSize=0,this.$store.dispatch("getTitle",{user_id:s,contactList:i}).then((t=>{this.title=this.$store.state.message.title}))}))}},mounted(){document.addEventListener("click",this.handleMousedown)},destroyed(){window.removeEventListener("click",this.handleMousedown)},computed:{userList:{get(){this.members=this.$store.state.user.roomUserList.userList}}},methods:{login(){this.$router.push("/login")},handleMousedown(t){1!==this.userRole&&this.showDialog&&!this.$el.contains(event.target)&&this.toogleDialogEmoji()},send(t){"Enter"==window.event.code&&this.msgSend(t)},audioPermission(){this.$refs.permission.getPermission()},handleBeforeupload(t){this.fileName=t.name,this.fileSize=t.size},handleError(t,e,s){this.$alert("文件上传失败，请重新上传！！！")},handleSuccess(t){if(1e4===t.code){let e=t.data;if(Object.keys(e).length>0){let t=e.file,s=e.fileName,o=s.lastIndexOf("."),i=s.substr(o+1),a=this.fileExt(i);this.sendAudio({file_name:s,file_size:e.fileSize,path:t,content_type:a})}}else this.$alert("文件上传失败，请重新上传！！！")},fileExt(t){let e=0;return e=-1!==this.imagesExt.indexOf(t.toLowerCase())?2:-1!==this.audioExt.indexOf(t.toLowerCase())?1:-1!==this.videoExt.indexOf(t.toLowerCase())?4:3,e},upload(){if(1===this.userRole)return;let t=this.$refs.uploadFile.$refs.uploadfileBut;t.$el.click()},btnClick(){if(1===this.userRole)return;new ft.A({enableWebRtc:!1,level:2001,completeCallback:this.callback,closeCallback:this.closeFn,canvasWidth:window.innerWidth,canvasHeight:window.innerHeight})},callback(t,e){this.$store.dispatch("uploadBase64",t).then((e=>{console.log("uploadFiles",e);let s=e.file,o=this.$refs.input,i=o.innerHTML,a=(JSON.stringify(t),i+"<img id = 'image' src="+s+">");o.innerHTML=a}))},convertImageToCanvas(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},closeFn(){},filterMatch(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())},deleteMatch(t,e,s){return this.contactList=this.contactList.filter((t=>t.nick_name!=e.trim())),console.log("deleteMatch:",this.contactList),e===t+s},getValue(t){this.atStatus=!0,this.contactList.push({nick_name:t.nick_name,is_robot:t.is_robot,photo:t.photo,room_id:t.photo,user_id:t.user_id,content_type:t.content_type,room_id:t.room_id})},audioData(t){if(!t)return tihs.alert("语音出现问题，请重试！！！"),!1;this.$store.dispatch("uploadAudio",t.formData).then((e=>{let s=e.file,o=e.fileName,i=o.lastIndexOf("."),a=o.substr(i+1),r=this.fileExt(a);this.audio={path:s,file_name:o,file_size:t.fileSize,content_type:r},this.sendAudio(this.audio)}))},fileSuccess(t){if(t){let e=t.mergePath,s=t.filename,o=s.lastIndexOf("."),i=s.substr(o+1);t.content_type=this.fileExt(i),t.file_name=t.newFileName,t.original_file_name=s,t.file_size=t.totalSize,t.md5=t.identifier,t.path=e,console.log("上传文件::",t),this.sendAudio(t)}},statusClass(t){console.log("状态::",t);let e="display: block;";!0===t.status&&(e="display: none;"),this.stateStatus=e},selectMsg(t){if(1===this.userRole)return;var e;let s=this.$refs.input,o=getSelection();s.focus();let i=[];if(o.rangeCount>0){i=o.getRangeAt(0),e&&(o.removeAllRanges(),o.addRange(e));let s=i.startContainer,a=i.startOffset;a>0?(s.insertData(a,t.data),i.setStart(s,a+t.data.length),i.collapse(!0),o.removeAllRanges(),o.addRange(i),e=o.getRangeAt(0)):(this.emo=t.data,o.removeAllRanges())}},toogleDialogEmoji(){this.showDialog=!this.showDialog},msgSend(t){if(1===this.userRole)return;this.$socket.open();let e=document.getElementById("sendMsg"),s=this.spaceTrim(e.innerText);if(0===s.length)return void this.$alert("你好，客官你还没有添写消息呢！！！");let o=e.innerHTML,i=this.contactList,a=0;this.audio.fileSize>0&&(o=this.audio.file,a=1);let r=this.msgInfo();r.msg=o,r.content_type=a,r.contactList=i,e.innerHTML="",console.log("发送消息::",r),this.$socket.volatile.emit("room",r),t.preventDefault()},spaceTrim(t){return t.replace(/(^\s*)|(\s*$)/g,"")},sendAudio(t){if(1===this.userRole)return;t.length<=0&&this.$alert("参数为空，请重新参数");let e=this.msgInfo(),s=t.content_type;e.msg=t.path,e.file_name=t.file_name,e.file_size=t.file_size,e.content_type=s,e.md5=t.md5,e.file_path=t.path,e.total_chunks=t.totalChunks,e.original_file_name=t.original_file_name,e.upload_status=t.uploadStatus,e.thumb_path=t.thumbPath,this.$socket.volatile.emit("room",e)},msgInfo(){const t=this.user_id,e=this.nick_name,s=this.userLogo,o=this.room_id;let i={room_id:o,user_id:t,nick_name:e,userLogo:s,userRole:this.userRole};return i}}},Mt=Et,Nt=(0,w.A)(Mt,st,ot,!1,null,"2fcf4ff0",null),Tt=Nt.exports,Ft=function(){var t=this,e=t._self._c;return e("div",{attrs:{index:t.index}},[e("span",{staticClass:"time-line"},[t._v(t._s(this.source.send_time)+" ")]),0==this.source.is_revoke?e("div",{class:1==this.source.tag?"stream-item":"stream-item creator"},[e("div",{class:1==this.source.tag?"item":"item creator"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:this.source.userLogo}})]),e("div",{staticClass:"body"},[e("div",{class:1==this.source.tag?"name":"name transform"},[t._v(t._s(this.source.nick_name))]),e("div",{ref:"content",staticClass:"content",attrs:{"data-isRevokeHidden":t.isRevokeHidden}},[0===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{ref:"textMsg",staticClass:"msg-html",domProps:{innerHTML:t._s(this.source.msg)}})])]):t._e(),1===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("mini-audio",{attrs:{"audio-source":this.source.file_path}})],1)]):t._e(),2===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[3===this.source.upload_status?e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:this.source.thumb_path,"preview-src-list":[this.source.file_path],lazy:""}})],1):4===this.source.upload_status?e("span",[t._v("加载失败...")]):e("span",[t._v("加载中...")])]):t._e(),3===this.source.content_type?e("div",{staticClass:"text file",attrs:{contenteditable:"false"},on:{click:function(e){return t.down()}}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",[t._v(" "+t._s(this.source.original_file_name)+" "),e("a",{ref:"downFile",staticStyle:{display:"none"},attrs:{href:this.source.file_path}})]),e("div",{staticClass:"fileSize",attrs:{contenteditable:"false"}},[t._v(" "+t._s(this.source.fileSize)+"KB")]),e("div",{staticClass:"upload_status"},[0===this.source.upload_status?e("span",[t._v("上传中")]):t._e(),1===this.source.upload_status?e("span",[t._v("上传成功")]):t._e(),2===this.source.upload_status?e("span",[t._v("发送中")]):t._e(),3===this.source.upload_status?e("span",[t._v("发送成功")]):t._e(),4===this.source.upload_status?e("span",[t._v("发送失败")]):t._e()]),t._m(0)])]):t._e(),4===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("el-popover",{staticClass:"vedio",attrs:{placement:"left",trigger:"click"}},[e("video",{staticClass:"popover-vedio",attrs:{controls:""}},[e("source",{attrs:{src:this.source.file_path}})]),e("img",{staticStyle:{"max-width":"400px","max-height":"400px"},attrs:{slot:"reference",src:"/assets/images/vedio.png"},slot:"reference"})])],1)]):t._e()])])])]):t._e(),1===this.source.is_revoke?e("div",{staticClass:"time-line",staticStyle:{margin:"20px 10px"}},[e("span",[t._v("你撤回了一条消息")])]):t._e()])},Pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"fileImg"},[e("img",{attrs:{src:"/assets/images/文件.png"}})])}],Bt=s(4042),Ot=s.n(Bt),zt=s(5695),qt=s(1683),Dt=s.n(qt);i["default"].use(Ot()),i["default"].use(zt.A);const jt=window.speechSynthesis,Ut=new SpeechSynthesisUtterance,Gt=speechSynthesis.getVoices();var Jt={name:"Item",data(){return{progress:0,is_stop:!0,duration:0,curr:0,volume:50,balance:50,style:"max-height: 100vh;max-width: 60vw; display:none;",user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,token:this.$store.state.user.token,isloading:!1,list:[]}},props:{index:{type:Number},source:{type:Object,default(){return{}}}},computed:{isRevokeHidden(){let t=Date.parse(this.source.send_time)+3e5,e=(new Date).getTime(),s=!0;return 0==this.source.tag&&t>=e&&(s=!1),s}},methods:{onContextmenu(t){return this.$contextmenu({items:[{label:"复制",onClick:()=>{this.copyOrderId2()}},{label:"语音",hidden:0!=this.source.content_type,onClick:()=>{this.handleSpeak()}},{label:"撤回",hidden:this.$refs.content.getAttribute("data-isRevokeHidden"),onClick:()=>{this.$socket.emit("revokeMsg",{token:this.token,room_id:this.room_id,seq:this.source.seq,index:this.index})}}],event:t,customClass:"custom-class tag-read",zIndex:1,minWidth:230}),!1},copyOrderId2(){var t=document.createElement("input");console.log(this.$refs.content.getAttribute("src"));let e=this.$refs.content.textContent;e.length<=0&&(e=this.source.msg),t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message.success("复制成功！")},handleSpeak(){let t=this.$refs.textMsg.textContent;Ut.text=t,Ut.lang="zh-CN",Ut.voice=Gt[20],Ut.volume=1,Ut.rate=1,Ut.pitch=1,jt.speak(Ut)},openImagesClick(){this.display="max-height: 100vh;max-width: 60vw; display:block;"},closeImagesClick(){this.display="max-height: 100vh;max-width: 60vw; display:none;"},down(){if(1==this.isloading)return this.$alert("正在上传！！！");let t=this.source,e=t.merge_number;this.list=t;let s=t.md5,o=t.seq,i=t.total_chunks,a=t.totalSize,r=t.file_name,n=t.chunk_number,l=t.upload_status,u={identifier:s,newFileName:r,totalChunks:i,mergeNumber:e,chunkNumber:n,totalSize:a,seq:o};0==l?this.isloading:1==l||2==l?(this.isloading,this.composeFile(u)):3==l&&this.$refs.downFile.click()},composeFile(t){this.isloading=!0;let e={seq:t.seq,room_id:this.room_id,user_id:this.user_id,identifier:t.identifier,newFileName:t.newFileName,totalChunks:t.totalChunks,mergeNumber:t.mergeNumber,totalSize:t.totalSize,chunkSize:Math.ceil(t.totalSize/t.totalChunks),uploadStatus:2};this.$socket.emit("mergeFile",e)}},sockets:{},components:{Clipboard:Dt()}},Yt=Jt,Wt=(0,w.A)(Yt,Ft,Pt,!1,null,"2d2deb3d",null),Ht=Wt.exports,Qt=N("roomNum")?JSON.parse(N("roomNum")):[],$t={name:"Message",data(){return{historyMessageList:[],tabshow:!1,user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,isLoading:!1,isEnd:!1,page:0,limit:20,timer:0,itemComponent:Ht,estimateSize:50,keeps:20,msgNum:0,isBottom:!1,totalNum:0}},props:["title"],sockets:{async chunkFileCallback(t){if(1e4!=t.code)return this.$alert(t.msg);{let e=t.data;e.isChunk=!0,1==e.uploadStatus&&this.updateStatus(e)}},async updateMsgStatusCallback(t){let e=t.data,s=e.seq;var o=this.historyMessageList.find((function(t){return t.seq===s}));return 1e4!==t.code?this.updateStatus(t.data):1==e.uploadStatus?(o.upload_status=1,this.composeFile(e)):(o.upload_status=e.uploadStatus,3==e.uploadStatus&&(o.thumb_path=null===e||void 0===e?void 0:e.thumb_path)),!0},async mergeFileCallback(t){let e=t.data,s={room_id:this.room_id,identifier:e.identifier,newFileName:e.newFileName,totalChunks:e.totalChunks,mergeNumber:e.mergeNumber,totalSize:e.totalSize,uploadStatus:e.uploadStatus,seq:e.seq};return 1e4!==t.code?s.uploadStatus=4:(console.log("mergeFileCallback:::",s),3==s.uploadStatus&&this.updateStatus(s)),!0},async revokeMsgCallback(t){let e=t.data;if(1e4===t.code){console.log("source::",e);let t=this.historyMessageList[e.index];t.is_revoke=1,this.historyMessageList[e.index]=t}else this.$alert("请稍后重试")}},mounted(){this.$store.state.message.historyMessageList=[],this.initLoadMsg()},destroyed(){},methods:{async composeFile(t){let e={seq:t.seq,room_id:this.room_id,user_id:this.user_id,identifier:t.identifier,newFileName:t.newFileName,totalChunks:t.totalChunks,mergeNumber:0,totalSize:t.totalSize,chunkSize:Math.ceil(t.totalSize/t.totalChunks),uploadStatus:2};this.updateStatus(e),await this.$socket.emit("mergeFile",e)},async updateStatus(t){await this.$socket.emit("updateMsgStatus",{room_id:this.room_id,user_id:this.user_id,identifier:t.identifier,newFileName:t.newFileName,uploadStatus:t.uploadStatus,totalChunks:t.totalChunks,chunkNumber:t.chunkNumber,totalSize:t.totalSize,seq:t.seq,isChunk:t.isChunk})},getLocation(t){let e=this.$refs.returnBottom,s=this.keeps;this.totalNum>this.msgNum&&(s=this.totalNum-this.msgNum),!0===this.isBottom&&(s-=10),e.scrollToIndex(s),this.msgNum=0,this.isBottom=!1,Qt[this.room_id]=0,console.log(Qt),M("roomNum",JSON.stringify(Qt))},onScroll(t){this.page>1&&(this.msgNum=0)},findNewMsg(t){if(t.room_id===this.room_id&&Object.keys(t).length>0)return this.$nextTick((()=>{if(t.sendUserId==t.userId){let t=this.$refs.returnBottom;t.reset(),t.scrollToBottom(),this.msgNum=0,this.isBottom=!0}else this.isBottom=!1,this.msgNum++})),this.msgNum},totop(){console.log("到顶了"),this.getdata()},bottom(){this.isBottom=!0;let t=this.msgNum;t>=10&&(this.msgNum=t),console.log("到底了")},getdata(){this.isEnd||this.isLoading||this.initLoadMsg()},initLoadMsg(){this.page++,this.isLoading=!0;let t=this.$refs.returnBottom;this.$store.dispatch("getGetMsg",{room_id:this.room_id,page:this.page,limit:this.limit}).then((e=>{e?this.$nextTick((()=>{this.isLoading=!1,1==this.page&&(t.reset(),t.scrollToBottom(),this.isBottom=!0,this.msgNum=e.offTotal+Qt[this.room_id],console.log("this.msgNum::",this.msgNum))})):this.isEnd=!0}))}},computed:{message:{get(){let t=this.$store.state.message.historyMessageList||[];this.historyMessageList=t,console.log("historyMessageList::",t),this.totalNum=this.historyMessageList.length}}},components:{MsgSend:Tt,virtualList:et()}},Xt=$t,Vt=(0,w.A)(Xt,K,Z,!1,null,"de958b36",null),Kt=Vt.exports,Zt=function(){var t=this,e=t._self._c;return e("el-aside",{staticClass:"userList",staticStyle:{width:"158px"}},[e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"disabled"}},t._l(t.userList,(function(s){return e("li",{staticClass:"list list-line",attrs:{id:"userLine"}},[e("img",{staticClass:"logo",attrs:{id:"userLine",src:s.photo,alt:""}}),"online"==s.is_online?[e("span",{staticClass:"userStatus",staticStyle:{"background-color":"cadetblue"}})]:t._e(),"offline"==s.is_online?[e("span",{staticClass:"userStatus"})]:t._e(),t._v(" "+t._s(s.nick_name)+" ")],2)})),0)])},te=[],ee={data(){return{userList:[],count:1,noMore:!1,loading:!1,pages:0,size:100}},props:{showUser:{type:Boolean}},computed:{disabled(){return this.loading||this.noMore}},mounted(){this.load()},methods:{load(){this.loading=!0,this.pages+=1,this.getUserList()},getUserList(){let t={pages:this.pages,size:this.size};this.$store.dispatch("getRoomUserList",t).then((t=>{let e=t.userList;this.userList=e,e.length<this.size&&(this.noMore=!0),this.userList.length===this.$store.state.user.roomUserList.total&&(this.noMore=!0),this.loading=!1}))}}},se=ee,oe=(0,w.A)(se,Zt,te,!1,null,"bb25528c",null),ie=oe.exports,ae=function(){var t=this,e=t._self._c;return e("el-footer",t._b({staticClass:"footer",attrs:{direction:"vertical",width:"100px",height:"800px"}},"el-footer",t.message,!1),[e("ul",t._b({staticClass:"list"},"ul",t.message,!1),t._l(t.list,(function(s){return e("li",{staticClass:"list-line",on:{click:function(e){return t.selectRoom(s.room_id)}}},[e("div",[t.selectRoomId===s.room_id?e("el-badge",{staticClass:"item",attrs:{max:t.max}},[e("el-button",{staticStyle:{color:"cadetblue"},attrs:{size:"small"}},[t._v(" "+t._s(s.name)+" ")])],1):t._e()],1),t.selectRoomId!=s.room_id?e("div",[e("el-badge",{staticClass:"item",attrs:{value:s.off_delivered_count+t.msgNumList[s.room_id],max:t.max}},[e("el-button",{attrs:{size:"small"}},[t._v(" "+t._s(s.name))])],1)],1):t._e()])})),0)])},re=[];window.speechSynthesis,new SpeechSynthesisUtterance,speechSynthesis.getVoices();var ne={name:"Room",data(){return{list:[],selectRoomId:1,wsmessageList:[],room_id:this.$store.state.user.roomInfo.room_id,max:140,msgNum:0,msgNumList:N("roomNum")?JSON.parse(N("roomNum")):[]}},props:[],mounted(){this.$store.dispatch("getRoomList").then((t=>{t?this.list=t:this.$alert("没有获取到房间列表")}))},methods:{async selectRoom(t){await this.$store.dispatch("getRoomInfo",t).then((e=>{e?(this.$store.dispatch("getRoomUserList",{pages:1,size:100}).then((t=>{!1===t&&this.$alert("用户列表请求失败"),this.$emit("roomUserList",t)})),this.selectRoomId=t,this.msgNumList[t]=0,M("roomNum",JSON.stringify(this.msgNumList))):this.$alert("聊天室信息请求失败")}))}},computed:{message:{get(){let t=this.$store.state.message.offMessageList,e=this.$store.state.user.roomList;if(t){let s=t.room_id;if(s){"undefined"===typeof this.msgNumList[s]&&(this.msgNum=0);for(let t=0;t<e.length;t++)e[t].room_id!=this.selectRoomId&&e[t].room_id==s&&(this.msgNum++,this.msgNumList[s]=this.msgNum);M("roomNum",JSON.stringify(this.msgNumList))}}}}}},le=ne,ue=(0,w.A)(le,ae,re,!1,null,"5610f796",null),ce=ue.exports,de={name:"Home",components:{MsgTop:Y,MsgBase:V,Messages:Kt,UserList:ie,Room:ce},data(){return{user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,userList:this.$store.state.user.roomUserList,roomInfo:this.$store.state.user.roomInfo,msgList:this.$store.state.message.historyMessageList,userStatus:"offline",timer:""}},mounted(){this.$socket.open(),window.addEventListener("blur",this.onblur,!0),window.addEventListener("focus",this.onfocus,!0)},beforeDestroy(){this.$socket.close(),window.removeEventListener("focus",this.onfocus,!0),window.removeEventListener("blur",this.onblur,!0)},sockets:{async connecting(){console.log("Socket 正在连接")},async disconnect(t){console.log("Socket 断开",t),!1===this.$socket.connected&&(this.userStatus="offline")},async connect_error(t){console.log("Socket 连接失败",t),!1===this.$socket.connected&&(this.userStatus="offline")},async connect(){console.log("Socket 连接成功"),!0===this.$socket.connected&&(this.userStatus="online")},async error(t){console.log("Socket错误:",t),console.log(this.$socket.connected),this.handleClose("服务器出错，请联系管理员！！！")}},methods:{roomUserList(t){this.roomInfo=this.$store.state.user.roomInfo,this.timer=this.roomInfo.room_id,console.log(" this.timer",this.timer)},handleClose(t){this.$confirm(t,"错误",{confirmButtonText:"确定",type:"error"}).then((e=>{this.$message({type:"success",message:t})})).catch((t=>{}))},onfocus(t){console.log("得到焦点")},visibilitychange(t){console.log(document.visibilityState);let e=document.visibilityState;"hidden"==e&&console.log(document.visibilityState,"用户离开了"),"visible"==e&&console.log(document.visibilityState,"回来了")},beforeunloadHandler(t){return t=t||window.event,t&&(t.returnValue="关闭提示"),"关闭提示"},onblur(t){console.log("失去焦点")}}},me=de,he=(0,w.A)(me,z,q,!1,null,null,null),ge=he.exports,pe=[{path:"/login",name:"Login",component:O,meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:x,meta:{requiresGuest:!0}},{path:"/",name:"Home",component:ge,meta:{requiresAuth:!0}}],fe=s(5857),ve=s.n(fe),we=s(5034);const ye=t=>{localStorage.setItem("TOKEN",t)},ke=()=>localStorage.getItem("TOKEN"),be=()=>{localStorage.removeItem("TOKEN")};var _e=s(1910),Ce=s(417),Se=s(2653),Ae=s.n(Se);let Le=Ce.A.create({baseURL:"/api",timeout:5e3});Le.interceptors.request.use((t=>{let e=ns.state.user.token;return e&&(t.headers.Authorization="Bearer "+e),Ae().start(),t}),(t=>(console.log("服务器请求数据失败",t),Promise.reject(t)))),Le.interceptors.response.use((t=>{let e=t.data;return Ae().done(),1e4===e.code?e:20401===e.code?void ds.push({path:"/login"}):e}),(t=>{console.log("服务器响应数据失败",t),500!==t.response.status&&401!==t.response.status||ds.push({path:"/login"})}));var xe=Le;let Ie=Ce.A.create({baseURL:"/mock",timeout:5e3});Ie.interceptors.request.use((t=>(Ae().start(),t))),Ie.interceptors.response.use((t=>(Ae().done(),t.data)),(t=>{console.log("服务器响应数据失败",t),alert("服务器响应数据失败")}));const Re=t=>xe({url:"user/v1/login",data:t,method:"post"}),Ee=t=>xe({url:"user/v1/register",data:t,method:"post"}),Me=t=>xe({url:`user/v1/get/auth/${t}`,type:t,method:"get"}),Ne=t=>xe({url:"user/v1/auth/login",data:t,method:"post"}),Te=t=>xe({url:`room/v1/room/info/${t}`,method:"get"}),Fe=t=>xe({url:`room/v1/room/user/list/${t}`,method:"get"}),Pe=()=>xe({url:"room/v1/room/index",method:"get"}),Be=()=>xe({url:"user/v1/out",method:"post"}),Oe=t=>xe({url:`message/v1/user/msg/${t}`,data:t,method:"get"}),ze=t=>xe({url:"upload/v1/audio",data:t,method:"post"}),qe=t=>xe({url:"upload/v1/files",data:t,method:"post"}),De=t=>xe({url:"upload/v1/base64",data:t,method:"post"}),je=t=>xe({url:"upload/v1/put",data:t,method:"post"}),Ue=t=>xe({url:"upload/v1/checkChunkExist",data:t,method:"post"}),Ge=t=>xe({url:"upload/v1/chunk",data:t,method:"post"}),Je=t=>xe({url:"upload/v1/merge",data:t,method:"post"}),Ye=t=>xe({url:"upload/v1/create/thumb",data:t,method:"post"}),We={code:"",userIsOnLine:"offline",token:ke(),userInfo:{},roomInfo:{},roomUserList:[],isAuthLogin:!1,roomList:{}},He={USERLOGIN(t,e){t.token=e},GETUSERINFO(t,e){t.userInfo=e,t.userIsOnLine=e.is_online},GETROOMINFO(t,e){t.roomInfo=e},ROOMUSERLIST(t,e){t.roomUserList=e},ISAUTHLOGIN(t,e){t.isAuthLogin=e},GETROOMList(t,e){t.roomList=e}},Qe={async userLogin({commit:t},e){let s=await Re(e);return 1e4===s.code&&(t("USERLOGIN",s.data.token),ye(s.data.token)),s},async userRegister({commit:t},e){let s=await Ee(e);return s},async authLogin({commit:t},e){let s=await Ne(e);return 1e4==s.code&&(console.log(s),t("USERLOGIN",s.data.token),ye(s.data.token),T("isAuthLogin")),s},async getAuthLogin({commit:t},e){let s=await Me(e);return 1e4==s.code&&(M("isAuthLogin",!0),s.data)},async getRoomUserList({commit:t},e){let s=`${We.roomInfo.room_id}/${e.pages}/${e.size}`,o=await Fe(s);return 1e4==o.code&&(t("ROOMUSERLIST",o.data),o.data)},async getRoomInfo({commit:t},e){let s=await Te(e),o=null===s||void 0===s?void 0:s.code;if(1e4===o){let e=null===s||void 0===s?void 0:s.data;return t("GETUSERINFO",null===e||void 0===e?void 0:e.userInfo),t("GETROOMINFO",null===e||void 0===e?void 0:e.roomInfo),!0}return!1},async getRoomList({commit:t}){let e=await Pe(),s=null===e||void 0===e?void 0:e.code;if(1e4===s){let s=null===e||void 0===e?void 0:e.data;return t("GETROOMList",null===s||void 0===s?void 0:s.list),null===s||void 0===s?void 0:s.list}return!1},async userLogout({commit:t}){let e=await Be();return 1e4===e.code?(t("USERLOGIN",!1),be(),T("isAuthLogin"),!0):e}},$e={};var Xe={state:We,mutations:He,actions:Qe,getters:$e};const Ve={title:"闪电",messageList:[],historyMessageList:[],offTotal:0,offMessageList:[]},Ke={GETOFFMSGTOTAL(t,e){t.offTotal=e},GETMESSAGELIST(t,e){t.messageList=e},GETHISTORYMESSAGELIST(t,e){Object.keys(e).length>0&&(t.historyMessageList=e)},GETTITLE(t,e){t.title=e},GETOFFMESSAGELIST(t,e){t.offMessageList=e}},Ze={async getTitle({commit:t},e){let s="闪电",o="新消息",i=ns.state.user.userInfo.user_id;if(e.contactList.length>0){let t=e.contactList.split(",");!0===t.includes(i.toString())&&(o="有人@我")}return i==e.user_id?(t("GETTITLE",s),s):(Object.keys(e).length>0&&(s="【"+o+"】闪电"),t("GETTITLE",s),s)},async getGetMsg({commit:t},e){let s=e.room_id,o=`${s}`;e.page&&(o=`${s}/${e.page}/${e.limit}`);let i=await Oe(o);if(console.log("getGetMsg::",i),1e4===i.code){let e=i.data.list,o=ns.state.user.userInfo.user_id,l=Ve.historyMessageList||[];for(var a=0;a<e.length;a++)if(e[a].msg_form&&s==e[a].room_id){var r=0;o!=e[a].msg_form&&(r=1);let t=e[a].msg_content,s=/\b(https?:\/\/[^\s]+)/g,i=t.match(s),u=e[a].content_type;if(null!==i&&0==u)for(var n=0;n<i.length;n++)t=t.replace(i[n],`<a href=${i[n]}>${i[n]}</a>`);let c=e[a].file_size,d=c/1024,m={user_id:e[a].msg_form,tag:r,nick_name:e[a].nick_name,msg:t,room_id:e[a].room_id,seq:e[a].seq,send_time:e[a].send_time,userLogo:e[a].photo,content_type:u,file_name:e[a].file_name,original_file_name:e[a].original_file_name,fileSize:d.toFixed(2),totalSize:c,md5:e[a].md5,total_chunks:e[a].total_chunks,upload_status:e[a].upload_status,chunk_number:e[a].chunk_number,merge_number:e[a].merge_number,is_revoke:e[a].is_revoke?e[a].is_revoke:0,delivered:e[a].delivered,file_path:e[a].file_path,thumb_path:e[a].thumb_path?e[a].thumb_path:e[a].file_path};l.unshift(m)}console.log("服务端发过来了一个数据:",l);let u=i.data.offTotal;return t("GETHISTORYMESSAGELIST",l),{msg:l,offTotal:u}}return!1},async uploadAudio({commit:t},e){let s=await ze(e);return 1e4===s.code&&s.data},async uploadBase64({commit:t},e){let s=await De(e);if(1e4===s.code)return s.data},async getMessage({commit:t},e){if(Object.keys(e).length>0){20014==e.code&&next("/login");const i=ns.state.user.userInfo.user_id;var s=0;i!==e.user_id&&(s=1);let a=e.sensitiveMsg,r=/\b(https?:\/\/[^\s]+)/g,n=a.match(r),l=e.content_type;if(null!==n&&0==l)for(var o=0;o<n.length;o++)a=a.replace(n[o],`<a href=${n[o]}>${n[o]}</a>`);let u=e.file_size,c=u/1024,d=ns.state.user.roomInfo.room_id,m=[];if(m={user_id:e.user_id,tag:s,nick_name:e.nick_name,msg:a,room_id:e.room_id,seq:e.seq,send_time:e.send_time,userLogo:e.userLogo,content_type:e.content_type,file_name:e.file_name,totalSize:u,original_file_name:e.original_file_name,fileSize:c.toFixed(2),md5:e.md5,total_chunks:e.total_chunks,upload_status:e.upload_status,chunk_number:e.chunk_number,merge_number:e.merge_number,is_revoke:e.is_revoke?e.is_revoke:0,delivered:0,file_path:e.file_path,thumb_path:e.thumb_path?e.thumb_path:e.file_path},d==e.room_id){let e=Ve.historyMessageList||[];e.push(m),console.log("oldMsg",e),t("GETMESSAGELIST",m)}else t("GETOFFMESSAGELIST",m);return console.log("getMessage服务端发过来了一个数据:",m),!0}}},ts={};var es={state:Ve,mutations:Ke,actions:Ze,getters:ts};const ss={},os={},is={async checkChunkExis({commit:t},e){let s=await Ue(e);return s},async uploadChunk({commit:t},e){let s=await Ge(e);return 1e4===s.code&&s.data},async uploadMerge({commit:t},e){let s=await Je(e);return 1e4===s.code&&s.data},async uploadFiles({commit:t},e){let s=await qe(e);if(1e4===s.code)return s.data},async uploadPut({commit:t},e){let s=await je(e);return 1e4===s.code&&s.data},async createThumb({commit:t},e){let s=await Ye(e);return 1e4===s.code&&s.data}},as={};var rs={state:ss,mutations:os,actions:is,getters:as};i["default"].use(_e.Ay);var ns=new _e.Ay.Store({modules:{user:Xe,message:es,upload:rs}});i["default"].use(b.Ay);let ls=b.Ay.prototype.push,us=b.Ay.prototype.replace;b.Ay.prototype.push=function(t,e,s){e&&s?ls.call(this,t,e,s):ls.call(this,t,(()=>{}),(()=>{}))},b.Ay.prototype.replace=function(t,e,s){e&&s?us.call(this,t,e,s):us.call(this,t,(()=>{}),(()=>{}))};let cs=new b.Ay({mode:"history",routes:pe,scrollBehavior(t,e,s){return{y:0}}});cs.beforeEach((async(t,e,s)=>{let o=ns.state.user.token;if(null!=o&&t.meta.requiresAuth)try{i["default"].use(new(ve())({debug:!0,connection:we.Ay.connect("http://localhost:9502",{connectionStateRecovery:{maxDisconnectionDuration:12e4,skipMiddlewares:!0},reconnectionDelayMax:100,transports:["websocket"],query:{token:ns.state.user.token},autoConnect:!1})}));let t=ns.state.user.roomInfo.room_id??1;console.log("room_id::",t),await ns.dispatch("getRoomInfo",t).then((t=>{console.log("res::",t),t&&s()}))}catch(a){await ns.dispatch("userLogout"),s({name:"Login"})}else{if(console.log("未登录1"),"Home"==t.name)return console.log("未登录"+t.name),void await ns.dispatch("userLogin",{user_role:1}).then((t=>{1e4!==t.code&&s({name:"Login"}),cs.push("/")}));be(),ut("isAuthLogin"),t.meta.requiresGuest?"Login"!=t.name&&"Register"!=t.name||s():s({name:"Login"})}}));var ds=cs;const ms=()=>{let t=0,e=window.screen,s=navigator.userAgent.toLowerCase();return void 0!==window.devicePixelRatio?t=window.devicePixelRatio:~s.indexOf("msie")?e.deviceXDPI&&e.logicalXDPI&&(t=e.deviceXDPI/e.logicalXDPI):void 0!==window.outerWidth&&void 0!==window.innerWidth&&(t=window.outerWidth/window.innerWidth),t&&(t=Math.round(100*t)),t};i["default"].component(a.Button.name,a.Button),i["default"].prototype.$msgbox=a.MessageBox,i["default"].prototype.$alert=a.MessageBox.alert,i["default"].config.productionTip=!1,i["default"].use(r()),i["default"].use(l()),i["default"].use(c()),i["default"].use(d.A),i["default"].use(h());const hs=navigator.userAgent,gs=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let ps=!1;for(let fs=0;fs<gs.length;fs++)if(hs.indexOf(gs[fs])>0){ps=!0;break}if(ps)document.body.style.zoom=.75;else{const t=ms();console.log(window.screen.width*window.devicePixelRatio),window.screen.width*window.devicePixelRatio>=3840?document.body.style.zoom=100/(Number(t)/2):window.screen.width*window.devicePixelRatio>=2560?document.body.style.zoom=.75:window.screen.width*window.devicePixelRatio>=1920?document.body.style.zoom=100/(Number(t)/1.5):window.screen.width*window.devicePixelRatio>=1440?document.body.style.zoom=100/(Number(t)/1.1):document.body.style.zoom=100/Number(t)}new i["default"]({beforeCreate(){i["default"].prototype.$bus=this,i["default"].prototype.$API=o},router:ds,store:ns,render:t=>t(k)}).$mount("#app")},748:function(t){t.exports="data:image/png;base64,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"}},e={};function s(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,o,i,a){if(!o){var r=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],a=t[c][2];for(var n=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(n=!1,a<r&&(r=a));if(n){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,i,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,a,r=o[0],n=o[1],l=o[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var c=l(s)}for(e&&e(o);u<r.length;u++)a=r[u],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(c)},o=self["webpackChunkwebchat_view"]=self["webpackChunkwebchat_view"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(8778)}));o=s.O(o)})();
//# sourceMappingURL=app.16ffbe0d.js.map